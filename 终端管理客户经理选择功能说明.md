# 终端管理客户经理选择功能说明

## 功能概述
已为终端管理模块的客户经理字段添加了员工选择器组件，支持从员工列表中选择客户经理。

## 实现方式

### 1. EmployeeSelector组件增强
- 添加了 `valueType` 属性，支持两种模式：
  - `id`: 返回员工ID（默认模式）
  - `name`: 返回员工姓名
- 组件会自动根据 `valueType` 设置正确的选项值
- 支持搜索和筛选功能

### 2. 终端管理页面集成
- **搜索框**: 使用 `EmployeeSelector` 组件，`valueType="name"`
- **表单编辑**: 使用 `EmployeeSelector` 组件，`valueType="name"`
- 自动处理员工选择变化事件

### 3. 数据流程
1. 用户点击客户经理选择框
2. 组件自动加载员工列表（在职员工）
3. 用户选择员工后，自动填充员工姓名到表单
4. 提交时保存员工姓名到数据库

## 使用方法

### 在搜索框中选择客户经理
1. 点击"客户经理"下拉框
2. 输入员工姓名进行搜索
3. 选择对应员工
4. 点击搜索按钮

### 在表单中选择客户经理
1. 点击"新增终端"或"编辑"按钮
2. 在客户经理字段点击下拉框
3. 选择对应的员工
4. 员工姓名会自动填充到表单中

## 技术特点

### 1. 兼容性
- 保持与现有数据结构的兼容性
- 数据库仍存储员工姓名
- 支持编辑现有数据

### 2. 用户体验
- 支持模糊搜索
- 显示员工姓名和职级信息
- 自动加载员工列表
- 清空功能

### 3. 数据一致性
- 确保选择的员工是真实存在的
- 防止手动输入错误
- 统一员工信息管理

## 配置说明

### EmployeeSelector组件参数
```vue
<EmployeeSelector 
  v-model="customerManager" 
  placeholder="请选择客户经理"
  value-type="name"
  @change="handleCustomerManagerChange"
/>
```

### 参数说明
- `v-model`: 绑定的值（员工姓名）
- `placeholder`: 占位符文本
- `value-type`: 值类型（"name" 或 "id"）
- `@change`: 选择变化事件

## 注意事项

1. **员工状态**: 默认只显示在职员工（status=1）
2. **数据同步**: 选择员工后会自动更新表单中的客户经理字段
3. **编辑模式**: 编辑现有终端时，会自动匹配客户经理姓名
4. **搜索功能**: 支持按员工姓名进行模糊搜索

## 扩展性

如果需要支持更多员工信息显示，可以：
1. 修改 `EmployeeSelector` 组件的显示格式
2. 添加更多员工属性到选项中
3. 支持多选功能（如果需要）

## 测试建议

1. **新增测试**: 测试新增终端时选择客户经理
2. **编辑测试**: 测试编辑现有终端时客户经理显示
3. **搜索测试**: 测试按客户经理搜索终端
4. **数据验证**: 验证保存的数据是否正确 
 