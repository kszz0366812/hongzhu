<!--pages/personal/personal.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section">
    <view class="user-header">
      <view class="user-avatar-container">
        <image 
          class="avatar" 
          src="{{userInfo.avatarUrl || '/utils/images/default-avatar.png'}}"
          mode="aspectFill"
        />
        <view class="avatar-status {{isLoggedIn ? 'online' : 'offline'}}"></view>
      </view>
      <view class="user-details">
        <text class="nickname">{{userInfo.realName || userInfo.nickName || 'å¾®ä¿¡ç”¨æˆ·'}}</text>
        <text class="user-role">{{userInfo.role || 'é¡¹ç›®æˆå‘˜'}}</text>
        <view class="status-badge {{isLoggedIn ? 'online' : 'offline'}}">
          <view class="status-dot"></view>
          <text class="status-text">{{isLoggedIn ? 'åœ¨çº¿' : 'ç¦»çº¿'}}</text>
        </view>
      </view>
    </view>
    
    <view class="user-actions" wx:if="{{userInfo.nickName}}">
      <!-- ç¼–è¾‘èµ„æ–™æŒ‰é’® -->
      <button 
        class="action-btn secondary-btn" 
        bindtap="editProfile"
      >
        <text class="btn-icon">âœï¸</text>
        <text class="btn-text">ç¼–è¾‘èµ„æ–™</text>
      </button>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ®åŒºåŸŸ -->
  <stats-section 
    stats="{{statsData}}" 
    layout="grid4"
    bind:actionButtonTap="onActionButtonTap"
  />

  <!-- åŠŸèƒ½æŒ‰é’®åŒºåŸŸ -->
  <action-buttons 
    buttons="{{actionButtons}}"
    bind:buttonTap="onActionButtonTap"
  />

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-section">
    <view class="menu-list">
      <view 
        class="menu-item" 
        wx:for="{{menuItems}}" 
        wx:key="index"
        bindtap="navigateToMenu"
        data-index="{{index}}"
      >
        <view class="menu-icon">{{item.icon}}</view>
        <view class="menu-content">
          <text class="menu-title">{{item.title}}</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
      
      <!-- æµ‹è¯•ç™»å½•æŒ‰é’® -->
      <view class="menu-item" bindtap="navigateToTest">
        <view class="menu-icon">ğŸ§ª</view>
        <view class="menu-content">
          <text class="menu-title">ç™»å½•æµ‹è¯•</text>
          <text class="menu-arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç™»å½•çŠ¶æ€æç¤º -->
  <view class="login-tip" wx:if="{{!isLoggedIn}}">
    <text class="tip-text">æ­£åœ¨è‡ªåŠ¨ç™»å½•ä¸­...</text>
  </view>
</view>
