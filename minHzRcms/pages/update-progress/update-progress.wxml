<!-- pages/update-progress/update-progress.wxml -->
<view class="container">
  <scroll-view class="form-content" scroll-y="true">
    <!-- 项目信息 -->
    <view class="project-info-section">
      <view class="project-name">{{projectInfo.name}}</view>
    </view>
    
    <!-- 进度百分比 -->
    <view class="form-item" wx:if="{{projectInfo.progress !== undefined}}">
      <text class="form-label">进度百分比 <text class="required">*</text></text>
      <view class="progress-input-section">
        <input class="progress-input" 
               type="number" 
               value="{{progressForm.progress}}"
               placeholder="请输入新进度"
               bindinput="updateProgressInput"
               bindblur="validateProgressInput" />
        <text class="progress-unit">%</text>
      </view>
      <view class="progress-hint">
        <text class="hint-text">当前进度：{{projectInfo.progress}}% | 进度范围：{{projectInfo.progress}}% - 100%</text>
      </view>
    </view>
    
    <!-- 进度内容 -->
    <view class="form-item">
      <text class="form-label">进度内容 <text class="required">*</text></text>
      <textarea class="form-textarea" 
                placeholder="{{isEditMode ? '请描述进度更新的内容' : '请详细描述本次进度提交的内容'}}"
                value="{{progressForm.content}}"
                data-field="content"
                bindinput="updateForm"
                maxlength="1000" />
      <view class="char-count">{{progressForm.content.length}}/1000</view>
    </view>
    
    <!-- 附件上传 -->
    <view class="form-item">
      <text class="form-label">附件</text>
      <attachment-uploader 
        attachments="{{progressForm.attachments}}"
        maxCount="{{5}}"
        bind:change="onAttachmentChange"
      />
    </view>
  </scroll-view>
  
  <!-- 底部操作按钮 -->
  <view class="form-actions">
    <button class="submit-btn" bindtap="submitProgress">{{isEditMode ? '更新进度' : '提交进度'}}</button>
  </view>
</view> 