<!-- pages/statistics/statistics.wxml -->
<view class="container">
  <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="stats-overview">
    <view class="section-title">æ€»ä½“æ¦‚è§ˆ</view>
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-icon">ğŸ“Š</view>
        <view class="stat-number">{{overview.totalReports}}</view>
        <view class="stat-label">æ€»æŠ¥å‘Šæ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ“</view>
        <view class="stat-number">{{overview.totalProjects}}</view>
        <view class="stat-label">æ€»é¡¹ç›®æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ“‹</view>
        <view class="stat-number">{{overview.totalTasks}}</view>
        <view class="stat-label">æ€»ä»»åŠ¡æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">âœ…</view>
        <view class="stat-number">{{overview.completedTasks}}</view>
        <view class="stat-label">å·²å®Œæˆä»»åŠ¡</view>
      </view>
    </view>
  </view>

  <!-- æŠ¥å‘Šç»Ÿè®¡ -->
  <view class="report-section">
    <view class="section-title">æŠ¥å‘Šç»Ÿè®¡</view>
    <view class="chart-container">
      <view class="chart-title">æŠ¥å‘Šç±»å‹åˆ†å¸ƒ</view>
      <view class="chart-content">
        <view class="chart-item" wx:for="{{reportStats}}" wx:key="type">
          <view class="chart-label">{{item.type}}</view>
          <view class="chart-bar">
            <view class="chart-fill" style="width: {{item.percentage}}%"></view>
          </view>
          <view class="chart-value">{{item.count}}ä»½</view>
        </view>
      </view>
    </view>
  </view>

  <!-- é¡¹ç›®ç»Ÿè®¡ -->
  <view class="project-section">
    <view class="section-title">é¡¹ç›®ç»Ÿè®¡</view>
    <view class="project-stats">
      <view class="project-item" wx:for="{{projectStats}}" wx:key="status">
        <view class="project-status {{item.status}}">{{item.statusText}}</view>
        <view class="project-count">{{item.count}}ä¸ª</view>
        <view class="project-percentage">{{item.percentage}}%</view>
      </view>
    </view>
  </view>

  <!-- ä»»åŠ¡ç»Ÿè®¡ -->
  <view class="task-section">
    <view class="section-title">ä»»åŠ¡ç»Ÿè®¡</view>
    <view class="task-stats">
      <view class="task-item" wx:for="{{taskStats}}" wx:key="status">
        <view class="task-status {{item.status}}">{{item.statusText}}</view>
        <view class="task-count">{{item.count}}ä¸ª</view>
        <view class="task-percentage">{{item.percentage}}%</view>
      </view>
    </view>
  </view>

  <!-- è¶‹åŠ¿åˆ†æ -->
  <view class="trend-section">
    <view class="section-title">è¶‹åŠ¿åˆ†æ</view>
    <view class="trend-chart">
      <view class="trend-title">è¿‘30å¤©æŠ¥å‘Šæäº¤è¶‹åŠ¿</view>
      <view class="trend-content">
        <view class="trend-item" wx:for="{{trendData}}" wx:key="date">
          <view class="trend-date">{{item.date}}</view>
          <view class="trend-bar" style="height: {{item.height}}%"></view>
          <view class="trend-value">{{item.count}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- éƒ¨é—¨ç»Ÿè®¡ -->
  <view class="department-section">
    <view class="section-title">éƒ¨é—¨ç»Ÿè®¡</view>
    <view class="department-list">
      <view class="department-item" wx:for="{{departmentStats}}" wx:key="name">
        <view class="department-info">
          <view class="department-name">{{item.name}}</view>
          <view class="department-desc">{{item.reports}}ä»½æŠ¥å‘Š | {{item.projects}}ä¸ªé¡¹ç›®</view>
        </view>
        <view class="department-progress">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.progress}}%"></view>
          </view>
          <view class="progress-text">{{item.progress}}%</view>
        </view>
      </view>
    </view>
  </view>
</view> 