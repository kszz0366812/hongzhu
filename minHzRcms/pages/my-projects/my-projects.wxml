<!-- pages/my-projects/my-projects.wxml -->
<view class="container">
  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section">
    <view class="stats-item">
      <view class="stats-number">{{totalProjects}}</view>
      <view class="stats-label">æ€»é¡¹ç›®</view>
    </view>
    <view class="stats-item">
      <view class="stats-number">{{ongoingProjects}}</view>
      <view class="stats-label">è¿›è¡Œä¸­</view>
    </view>
    <view class="stats-item">
      <view class="stats-number">{{pendingProjects}}</view>
      <view class="stats-label">å¾…å®‰æ’</view>
    </view>
    <view class="stats-item">
      <view class="stats-number">{{completedProjects}}</view>
      <view class="stats-label">å·²å®Œæˆ</view>
    </view>
  </view>

  <!-- æ ‡ç­¾é¡µ -->
  <view class="tabs-section">
    <view class="tab-item {{activeTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-tab="all">å…¨éƒ¨</view>
    <view class="tab-item {{activeTab === 'ongoing' ? 'active' : ''}}" bindtap="switchTab" data-tab="ongoing">è¿›è¡Œä¸­</view>
    <view class="tab-item {{activeTab === 'pending' ? 'active' : ''}}" bindtap="switchTab" data-tab="pending">å¾…å®‰æ’</view>
    <view class="tab-item {{activeTab === 'completed' ? 'active' : ''}}" bindtap="switchTab" data-tab="completed">å·²å®Œæˆ</view>
  </view>

    <!-- é¡¹ç›®åˆ—è¡¨ -->
  <view class="project-list">
    <view class="project-item" wx:for="{{filteredProjects}}" wx:key="id">
      <view class="project-content" bindtap="navigateToProjectDetail" data-id="{{item.id}}">
        <view class="project-title-row">
          <view class="project-title-section">
            <text class="project-title">{{item.name}}</text>
            <text class="project-level-label {{item.levelClass}}">{{item.level || item.priority}}</text>
          </view>
          <text class="project-status-label {{item.statusClass}}">{{item.status}}</text>
        </view>
        
        <view class="project-info">
          <view class="info-row">
            <view class="label">é¡¹ç›®å‘¨æœŸï¼š</view>
            <view class="value">{{item.startDate}} è‡³ {{item.endDate}}</view>
          </view>
          <view class="info-row">
            <view class="label">é¡¹ç›®ç®€ä»‹ï¼š</view>
            <view class="value">{{item.description}}</view>
          </view>
          <view class="info-row">
            <view class="label">é¡¹ç›®ç­‰çº§ï¼š</view>
            <view class="value">{{item.level || item.priority}}</view>
          </view>
        </view>
        
        <view class="project-progress">
          <view class="progress-info">
            <view class="progress-text">é¡¹ç›®è¿›åº¦</view>
            <view class="progress-text">{{item.progress}}%</view>
          </view>
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.progress}}%"></view>
          </view>
        </view>
      </view>
      
      <!-- é¡¹ç›®æˆå‘˜ -->
      <view class="project-members">
        <view class="members-header" catchtap="toggleMembers" data-id="{{item.id}}">
          <view class="members-title-section">
            <text class="members-title">é¡¹ç›®æˆå‘˜</text>
            <text class="members-count">({{item.invitedMembers.length}}äºº)</text>
          </view>
          <view class="expand-icon {{item.showMembers ? 'expanded' : ''}}">â–¼</view>
        </view>
        <view class="members-grid {{item.showMembers ? 'expanded' : ''}}" wx:if="{{item.invitedMembers && item.invitedMembers.length > 0}}">
          <view class="member-item" wx:for="{{item.invitedMembers}}" wx:key="id" wx:for-item="member">
            <view class="member-avatar">ğŸ‘¤</view>
            <text class="member-name">{{member.name}}</text>
          </view>
        </view>
      </view>
      
      <view class="project-actions">
        <button class="action-btn" catchtap="inviteMembers" data-id="{{item.id}}">é‚€è¯·æˆå‘˜</button>
        <button class="action-btn" catchtap="updateProgress" data-id="{{item.id}}">æ›´æ–°è¿›åº¦</button>
        <button class="action-btn" catchtap="editProject" data-id="{{item.id}}">ç¼–è¾‘</button>
        <button class="action-btn delete" catchtap="deleteProject" data-id="{{item.id}}">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredProjects.length === 0}}">
    <view class="empty-text">æš‚æ— é¡¹ç›®</view>
  </view>
</view> 