<!-- components/member-selector/member-selector.wxml -->
<view class="member-selector-overlay" wx:if="{{show}}" bindtap="onClose" catchtouchmove="stopPropagation">
  <view class="member-selector-modal" catchtap="stopPropagation" catchtouchmove="stopPropagation">
    <!-- æœç´¢æ¡† -->
    <view class="member-selector-search-section">
      <view class="search-input-wrapper">
        <text class="search-icon">ğŸ”</text>
        <input 
          class="member-selector-search-input" 
          placeholder="{{placeholder}}" 
          value="{{searchText}}"
          bindinput="onSearchInput"
        />
      </view>
    </view>
    
    <!-- å·²é€‰æ‹©æˆå‘˜æ˜¾ç¤ºï¼ˆå¤šé€‰æ¨¡å¼ï¼‰- å§‹ç»ˆæ˜¾ç¤ºï¼Œå›ºå®šé«˜åº¦ -->
    <view class="selected-members-section" wx:if="{{multiple}}">
      <view class="selected-members-header">
        <text class="selected-members-title">å·²é€‰æ‹©</text>
        <text class="selected-members-count">({{tempSelectedMembers.length}})</text>
      </view>
      <scroll-view 
        class="selected-members-scroll" 
        scroll-y="true"
        enhanced="true"
        show-scrollbar="true"
        bindtouchmove="onScrollTouchMove"
      >
        <view class="selected-members-list">
          <view 
            class="selected-member-item" 
            wx:for="{{tempSelectedMembers}}" 
            wx:key="id"
            wx:for-item="member"
          >
            <image 
              class="selected-member-avatar" 
              src="/utils/images/default-avatar.png"
              mode="aspectFill"
            />
            <text class="selected-member-name">{{member.name}}</text>
            <view class="selected-member-remove" bindtap="onSelectMember" data-member="{{member}}">
              <text class="remove-icon">Ã—</text>
            </view>
          </view>
          <!-- ç©ºçŠ¶æ€æç¤º -->
          <view class="selected-member-empty" wx:if="{{tempSelectedMembers.length === 0}}">
            <text class="empty-text">è¯·é€‰æ‹©æˆå‘˜</text>
          </view>
        </view>
      </scroll-view>
    </view>
    
    <!-- æˆå‘˜åˆ—è¡¨ -->
    <view class="member-selector-list-wrapper">
      <scroll-view 
        class="member-selector-list" 
        scroll-y="true" 
        enhanced="true" 
        show-scrollbar="true"
        scroll-top="{{scrollTop}}"
        bindtouchmove="onScrollTouchMove"
        bindscroll="onScroll"
      >
        <view class="member-list-container">
          <view 
            class="member-selector-item {{multiple && memberSelectedStatus[member.id || member.employeeId || member.userId] ? 'selected' : ''}}"
            wx:for="{{filteredMembers}}" 
            wx:key="id"
            wx:for-item="member"
            bindtap="onSelectMember"
            data-member="{{member}}"
          >
            <view class="member-selector-left">
              <image 
                class="member-selector-avatar" 
                src="/utils/images/default-avatar.png"
                mode="aspectFill"
              />
              <text class="member-selector-name">{{member.name}}</text>
            </view>
            <view class="member-selector-check" wx:if="{{multiple && memberSelectedStatus[member.id || member.employeeId || member.userId]}}">
              <text class="check-icon">âœ“</text>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="member-selector-empty" wx:if="{{showEmptyState && filteredMembers.length === 0}}">
      <text class="member-selector-empty-text">{{emptyText}}</text>
    </view>
    
    <!-- åº•éƒ¨æŒ‰é’® -->
    <view class="member-selector-footer">
      <button class="member-selector-btn cancel" bindtap="onCancel">å–æ¶ˆ</button>
      <button class="member-selector-btn confirm" wx:if="{{multiple}}" bindtap="onConfirm">{{confirmText}}</button>
    </view>
  </view>
</view> 